"use strict";(self.webpackChunkcoffee_queen=self.webpackChunkcoffee_queen||[]).push([[592],{2034:(m,_,r)=>{r.d(_,{M:()=>p});var t=r(4121),u=r(257),l=r(9725);let p=(()=>{class o{constructor(s){this.http=s,this.disparadorProduct=new t.X({}),this.products=[]}get arrayProducts(){return[...this.products]}setProducts(s,c){if("delete"==c){const h=this.products.filter(a=>a.name!=s.name);this.products=h}else this.products.push(s)}getAllProducts(){return this.http.get("https://coffeequeen3.herokuapp.com/products")}post(s){return this.http.post("https://coffeequeen3.herokuapp.com/products",s)}putProductApi(s,c){return this.http.put(`https://coffeequeen3.herokuapp.com/products/${c}`,s)}deleteProduct(s){return this.http.delete(`https://coffeequeen3.herokuapp.com/products/${s}`)}}return o.\u0275fac=function(s){return new(s||o)(u.LFG(l.eN))},o.\u0275prov=u.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},464:(m,_,r)=>{r.d(_,{q:()=>h});var t=r(257),u=r(2034),l=r(4800),p=r(1048),o=r(9508);function g(a,d){if(1&a&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.messageProduct)}}function s(a,d){if(1&a&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(null==e.data?null:e.data.messageCard)}}function c(a,d){if(1&a){const e=t.EpF();t.TgZ(0,"fieldset",1),t.TgZ(1,"div"),t.TgZ(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"button",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.decreaseQuantity(i.data)}),t._uU(12,"-"),t.qZA(),t.TgZ(13,"input",7),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().data.qty=i}),t.qZA(),t.TgZ(14,"button",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.increaseQuantity(i.data)}),t._uU(15,"+"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(16,g,2,1,"p",8),t.YNc(17,s,2,1,"p",8),t.qZA()}if(2&a){const e=t.oxw();t.xp6(3),t.Q6J("src",e.safeUrlPic,t.LSH),t.xp6(3),t.Oqu(e.data.name),t.xp6(2),t.Oqu(t.xi3(9,7,e.data.price,"S/. ")),t.xp6(5),t.Q6J("ngModel",e.data.qty),t.uIk("disabled",!0),t.xp6(3),t.Q6J("ngIf",0!=e.data.qty),t.xp6(1),t.Q6J("ngIf",0!=e.data.qty)}}let h=(()=>{class a{constructor(e,n){this.productService=e,this.sanitizer=n,this.quantity=0,this.isRepeat=!1,this.order={_id:"",userId:"",client:"",products:[{qty:0,subTotal:0,productId:{_id:"",name:"",price:0,image:"",type:"",dateEntry:"",qty:0,subTotal:0}}],total:0,totalQty:0,numberTable:"",status:"",dateEntry:"",dateDelivering:"",dateDone:"",timeResult:"",dateProcessed:"",dateCanceled:"",additional:""},this.messageProduct=""}ngOnInit(){this.products=this.productService.arrayProducts}get safeUrlPic(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.data.image)}updateRepeats(e){this.products.map(n=>{e.name==n.name&&(n.qty=this.data.qty,n.subTotal=this.data.subTotal,this.isRepeat=!0)})}increaseQuantity(e){this.quantity=e.qty+=1,e.subTotal=this.quantity*e.price,this.order.total+=e.subTotal,this.order.total-=e.price*(this.quantity-1),this.updateRepeats(e),this.isRepeat||e.qty>1||this.productService.setProducts(e)}decreaseQuantity(e){this.quantity=e.qty-=1,e.subTotal=this.quantity*e.price,this.order.total-=e.subTotal,this.order.total+=e.price*(this.quantity-1),this.quantity<0&&(e.qty=0,this.productService.setProducts(e,"delete"),this.products=this.productService.arrayProducts),this.products.map(n=>{e.name==n.name&&(n.qty=this.quantity,n.qty<=0&&(e.qty=0,this.productService.setProducts(e,"delete")),this.products=this.productService.arrayProducts,n.subTotal=n.qty*e.price)}),e.qty<=0&&(e.qty=0,this.productService.setProducts(e,"delete"),this.products=this.productService.arrayProducts)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(u.M),t.Y36(l.H7))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-card-product"]],inputs:{data:"data"},decls:1,vars:1,consts:[["class","dsc-card mt-1  mb-2",4,"ngIf"],[1,"dsc-card","mt-1","mb-2"],[1,"dsc-card__img"],["alt","",1,"d-block","my-auto","mx-auto",3,"src"],[1,"dsc-card__info"],[1,"inputCant","mt-2"],["type","button",1,"btn","btn-light","sizeBtn",3,"click"],["type","text",1,"form-control","formInput","text-center",3,"ngModel","ngModelChange"],["class","msgCard text-success",4,"ngIf"],[1,"msgCard","text-success"]],template:function(e,n){1&e&&t.YNc(0,c,18,10,"fieldset",0),2&e&&t.Q6J("ngIf",n.data)},directives:[p.O5,o.Fj,o.JJ,o.On],pipes:[p.H9],styles:[".dsc-card[_ngcontent-%COMP%]{height:200px;max-width:200px;border:1px solid rgba(0,0,0,.25);border-radius:10px;box-shadow:0 0 6px 1px #00000026;padding-bottom:1rem;display:flex;flex-direction:column;justify-content:center;align-items:center;border-left:4px solid #884d09;transition:.7s all ease-in-out;background-color:#fff;height:95%}.dsc-card__img[_ngcontent-%COMP%]{width:150px;height:90px;margin:1rem}.dsc-card__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.dsc-card__info[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.25);font-size:16px;text-align:center}.dsc-card__info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0px 0px}.dsc-card[_ngcontent-%COMP%]:hover{transform:scale(1.1);cursor:pointer}.dsc-card[_ngcontent-%COMP%]   .alertProduct[_ngcontent-%COMP%]{font-size:small;margin-top:10px}.dsc-card[_ngcontent-%COMP%]   .msgCard[_ngcontent-%COMP%]{font-size:12px;margin-top:10px;margin-bottom:-10px}.inputCant[_ngcontent-%COMP%]{width:100%;display:flex!important;justify-content:center!important;margin:auto}.inputCant[_ngcontent-%COMP%]   .sizeBtn[_ngcontent-%COMP%]{width:60px;background-color:#e49329;font-size:24px;font-weight:700!important;color:#fff}.inputCant[_ngcontent-%COMP%]   .formInput[_ngcontent-%COMP%]{width:40px}button[_ngcontent-%COMP%]{display:inline-block!important;margin:auto!important;background-color:#b85c38}"]}),a})()}}]);