"use strict";(self.webpackChunkcoffee_queen=self.webpackChunkcoffee_queen||[]).push([[37],{3037:(R,C,a)=>{a.r(C),a.d(C,{ProductsControlModule:()=>I});var p=a(1048),Z=a(4200);function b(o,i,e,n,r,s,d){try{var l=o[s](d),c=l.value}catch(g){return void e(g)}l.done?i(c):Promise.resolve(c).then(n,r)}var _=a(3388),t=a(257),P=a(4800),q=a(2034),x=a(9725),u=a(9508),f=a(3193);function M(o,i){1&o&&(t.TgZ(0,"td"),t._uU(1,"Bebidas"),t.qZA())}function k(o,i){1&o&&(t.TgZ(0,"td"),t._uU(1,"Jugos"),t.qZA())}function U(o,i){1&o&&(t.TgZ(0,"td"),t._uU(1,"Postres"),t.qZA())}function v(o,i){1&o&&(t.TgZ(0,"td"),t._uU(1,"Caf\xe9s/T\xe9s"),t.qZA())}function S(o,i){1&o&&(t.TgZ(0,"td"),t._uU(1,"Hamburguesas"),t.qZA())}function J(o,i){1&o&&(t.TgZ(0,"td"),t._uU(1,"Snacks"),t.qZA())}function w(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",14),t.TgZ(1,"div",15),t.TgZ(2,"label",37),t._uU(3,"Descripci\xf3n:"),t.qZA(),t.TgZ(4,"input",38),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw(2).nameProductUpdate=r}),t.qZA(),t.qZA(),t.TgZ(5,"div",15),t.TgZ(6,"label",39),t._uU(7,"Precio:"),t.qZA(),t.TgZ(8,"input",40),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw(2).priceProductUpdate=r}),t.qZA(),t.qZA(),t.TgZ(9,"label",41),t._uU(10,"Categoria:"),t.qZA(),t.TgZ(11,"ng-select",42),t.NdJ("ngModelChange",function(r){return t.CHM(e),t.oxw(2).optionSelectedCategory=r}),t.qZA(),t.qZA(),t.TgZ(12,"div",43),t.TgZ(13,"button",44),t.NdJ("click",function(){return t.CHM(e).$implicit.close("return")}),t._uU(14,"Cancelar"),t.qZA(),t.TgZ(15,"button",45),t.NdJ("click",function(){return t.CHM(e).$implicit.close("return")})("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw().updateProduct(r)}),t._uU(16," Modificar"),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(4),t.Q6J("ngModel",e.nameProductUpdate),t.xp6(4),t.Q6J("ngModel",e.priceProductUpdate),t.xp6(3),t.Q6J("items",e.arrayCategory)("ngModel",e.optionSelectedCategory)}}function N(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",14),t.TgZ(1,"h5",46),t._uU(2),t.qZA(),t.qZA(),t.TgZ(3,"div",43),t.TgZ(4,"button",44),t.NdJ("click",function(){return t.CHM(e).$implicit.close("return")}),t._uU(5,"Cancelar"),t.qZA(),t.TgZ(6,"button",45),t.NdJ("click",function(){return t.CHM(e).$implicit.close("return")})("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw().deleteProduct(r._id)}),t._uU(7,"Eliminar"),t.qZA(),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij("\xbfEst\xe1s seguro que deseas eliminar ",e.name," ?")}}function F(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"img",30),t.qZA(),t.YNc(8,M,2,0,"td",31),t.YNc(9,k,2,0,"td",31),t.YNc(10,U,2,0,"td",31),t.YNc(11,v,2,0,"td",31),t.YNc(12,S,2,0,"td",31),t.YNc(13,J,2,0,"td",31),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t.TgZ(17,"img",32),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(21);return t.oxw().open(r)})("click",function(){const s=t.CHM(e).$implicit;return t.oxw().capturar(s)}),t.qZA(),t.qZA(),t.TgZ(18,"td"),t.TgZ(19,"img",33),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(23);return t.oxw().open(r)}),t.qZA(),t.qZA(),t.YNc(20,w,17,4,"ng-template",34,35,t.W1O),t.YNc(22,N,8,1,"ng-template",34,36,t.W1O),t.qZA()}if(2&o){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(t.xi3(5,10,e.price,"s/.")),t.xp6(3),t.s9C("src",e.image,t.LSH),t.xp6(1),t.Q6J("ngIf","drinks"==e.type),t.xp6(1),t.Q6J("ngIf","juices"==e.type),t.xp6(1),t.Q6J("ngIf","desserts"==e.type),t.xp6(1),t.Q6J("ngIf","cafes"==e.type),t.xp6(1),t.Q6J("ngIf","hamburguers"==e.type),t.xp6(1),t.Q6J("ngIf","snacks"==e.type),t.xp6(2),t.Oqu(e.dateEntry)}}const T=function(){return{standalone:!0}},E=[{path:"",component:(()=>{class o{constructor(e,n,r,s){var d=this;this.sanitizer=e,this.productsService=n,this.http=r,this.modalService=s,this.productsAdd={_id:"",name:"",price:0,image:"",type:"",dateEntry:"",qty:0,subTotal:0},this.arrayCategory=[],this.filesImage=[],this.description="",this.previsualizacion="",this.optionSelected="",this.priceProduct=0,this.loading=!1,this.closeResult="",this.comment="",this.setcomment="",this.files=[],this.optionSelectedCategory="",this.nameProductUpdate="",this.priceProductUpdate=0,this.loadImages=()=>{try{const l=(new Date).toString();switch(this.productsAdd.dateEntry=l.split(" ").splice(0,4).toString().replace(/,+/g," "),this.productsAdd.name=this.description,this.optionSelected){case"caf\xe9s/t\xe9s":this.productsAdd.type="cafes";break;case"jugos":this.productsAdd.type="juices";break;case"bebidas":this.productsAdd.type="drinks";break;case"snacks":this.productsAdd.type="snacks";break;case"postres":this.productsAdd.type="desserts";break;case"hamburguesas":this.productsAdd.type="hamburguers"}this.productsAdd.price=Number(this.priceProduct),this.productsAdd.image="../../assets/images/default.png",this.productsService.post(this.productsAdd).subscribe(c=>(this.loading=!1,c)),this.products.push(this.productsAdd),this.cleanProductForm()}catch(l){console.log("ERROR",l)}},this.blobFile=function(){var l=function y(o){return function(){var i=this,e=arguments;return new Promise(function(n,r){var s=o.apply(i,e);function d(c){b(s,n,r,d,l,"next",c)}function l(c){b(s,n,r,d,l,"throw",c)}d(void 0)})}}(function*(c){return new Promise((g,O)=>{try{const h=window.URL.createObjectURL(c),A=d.sanitizer.bypassSecurityTrustUrl(h),m=new FileReader;m.readAsDataURL(c),m.onload=()=>{g({blob:c,image:A,base:m.result})},m.onerror=j=>{g({blob:c,image:A,base:null})}}catch(h){O(h)}})});return function(c){return l.apply(this,arguments)}}(),this.arrayCategory=["caf\xe9s/t\xe9s","jugos","bebidas","snacks","postres","hamburguesas"]}ngOnInit(){this.productsService.getAllProducts().subscribe(e=>{this.products=e}),this.optionSelected="Seleccione categoria"}capturar(e){switch(e.type){case"cafes":this.optionSelectedCategory="caf\xe9s/t\xe9s";break;case"juices":this.optionSelectedCategory="jugos";break;case"drinks":this.optionSelectedCategory="bebidas";break;case"snacks":this.optionSelectedCategory="snacks";break;case"desserts":this.optionSelectedCategory="postres";break;case"hamburguers":this.optionSelectedCategory="hamburguesas"}this.nameProductUpdate=e.name,this.priceProductUpdate=Number(e.price)}updateProduct(e){switch(e.name=this.nameProductUpdate,e.price=Number(this.priceProductUpdate),this.optionSelectedCategory){case"caf\xe9s/t\xe9s":e.type="cafes";break;case"jugos":e.type="juices";break;case"bebidas":e.type="drinks";break;case"snacks":e.type="snacks";break;case"postres":e.type="desserts";break;case"hamburguesas":e.type="hamburguers"}this.productsService.putProductApi(e,e._id).subscribe()}onFileSelected(e){this.imagen=e.target.files[0],"image/png".includes(this.imagen.type)?(this.files.push(this.imagen),this.blobFile(this.imagen).then(n=>{this.imagenPrevia=n.base})):console.log("No es imagen")}cleanProductForm(){this.description="",this.priceProduct=0,this.optionSelected="Seleccione Rol"}deleteProduct(e){this.productsService.deleteProduct(e).subscribe();const n=this.products.filter(r=>r._id!=e);this.products=n}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",windowClass:"custom-class",scrollable:!0,backdrop:!1,keyboard:!1}).result.then(n=>{this.closeResult=`Closed with: ${n}`,this.setcomment=this.comment},n=>{this.closeResult=`Dismissed ${this.getDismissReason(n)}`})}getDismissReason(e){return e===_.If.ESC?"by pressing ESC":e===_.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${e}`}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(P.H7),t.Y36(q.M),t.Y36(x.eN),t.Y36(_.FF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-control"]],decls:53,vars:12,consts:[[1,"mb-4","mt-4"],["data-bs-toggle","modal","data-bs-target","#modalFormUser","data-bs-whatever","@getbootstrap",1,"btn","btnAgregar"],[1,"margen","tablePedidos","p-3"],[1,"p-5","table","table-striped"],[1,"colorPedido"],["scope","col"],[4,"ngFor","ngForOf"],["id","modalFormUser","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],["action","","method","post","name","formProduct",3,"ngSubmit"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],["for","recipient-name",1,"col-form-label"],["type","text","id","recipient-name",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["type","file","id","file",1,"input-file",3,"change"],["for",""],["width","100px","alt","",3,"src"],[1,"mb-3","d-flex"],["for","recipient-name5",1,"col-form-label","w-50"],["id","recipient-name5",1,"form-control","w-50",3,"ngModel","ngModelOptions","ngModelChange"],["for","recipient-name",1,"col-form-label","w-75"],["name","selectCategory",3,"items","ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"wrapper-button"],["type","submit","data-bs-dismiss","modal",1,"w-100","btn","btn-palet",3,"disabled"],["width","60","alt","",3,"src"],[4,"ngIf"],["src","../../../../assets/editar.png",1,"cursor",3,"click"],["src","../../../../assets/bxs-trash.png",1,"cursor",3,"click"],["class","custom-class"],["contentEditProduct",""],["content",""],["for","nameProductUpdate",1,"col-form-label"],["type","text","id","nameProductUpdate","name","inputProductEdit",1,"form-control",3,"ngModel","ngModelChange"],["for","inputPriceEdit",1,"col-form-label"],["id","inputPriceEdit","name","inputPriceEdit",1,"form-control",3,"ngModel","ngModelChange"],["for","select",1,"col-form-label","w-75"],[3,"items","ngModel","ngModelChange"],[1,"modal-footer","d-flex","justify-content-center"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-palet",3,"click"],["id","modal-basic-title",1,"modal-title"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t._uU(2,"Agregar Producto"),t.qZA(),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"table",3),t.TgZ(5,"thead"),t.TgZ(6,"tr",4),t.TgZ(7,"th",5),t._uU(8,"Descripci\xf3n"),t.qZA(),t.TgZ(9,"th",5),t._uU(10,"Precio"),t.qZA(),t.TgZ(11,"th",5),t._uU(12,"imagen"),t.qZA(),t.TgZ(13,"th",5),t._uU(14,"Categoria"),t.qZA(),t.TgZ(15,"th",5),t._uU(16,"fecha de Ingreso"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"tbody"),t.YNc(18,F,24,13,"tr",6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",7),t.TgZ(20,"div",8),t.TgZ(21,"div",9),t.TgZ(22,"form",10),t.NdJ("ngSubmit",function(){return n.loadImages()}),t.TgZ(23,"div",11),t.TgZ(24,"h5",12),t._uU(25,"Agregar Producto"),t.qZA(),t._UZ(26,"button",13),t.qZA(),t.TgZ(27,"div",14),t.TgZ(28,"div",15),t.TgZ(29,"label",16),t._uU(30,"Descripci\xf3n:"),t.qZA(),t.TgZ(31,"input",17),t.NdJ("ngModelChange",function(s){return n.description=s}),t.qZA(),t.qZA(),t.TgZ(32,"input",18),t.NdJ("change",function(s){return n.onFileSelected(s)}),t.qZA(),t.TgZ(33,"div"),t.TgZ(34,"label",19),t._uU(35,"Preview"),t.qZA(),t.TgZ(36,"div"),t._UZ(37,"img",20),t.qZA(),t.qZA(),t.TgZ(38,"div",21),t.TgZ(39,"div"),t.TgZ(40,"label",22),t._uU(41,"Precio:"),t.qZA(),t.TgZ(42,"input",23),t.NdJ("ngModelChange",function(s){return n.priceProduct=s}),t.qZA(),t.qZA(),t.TgZ(43,"div"),t.TgZ(44,"label",24),t._uU(45,"Categoria:"),t.qZA(),t.TgZ(46,"ng-select",25),t.NdJ("ngModelChange",function(s){return n.optionSelected=s}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",26),t.TgZ(48,"button",27),t._uU(49,"Cancelar"),t.qZA(),t.TgZ(50,"div",28),t.TgZ(51,"button",29),t._uU(52),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(18),t.Q6J("ngForOf",n.products),t.xp6(13),t.Q6J("ngModel",n.description)("ngModelOptions",t.DdM(10,T)),t.xp6(6),t.Q6J("src",n.imagenPrevia,t.LSH),t.xp6(5),t.Q6J("ngModel",n.priceProduct)("ngModelOptions",t.DdM(11,T)),t.xp6(4),t.Q6J("items",n.arrayCategory)("ngModel",n.optionSelected),t.xp6(5),t.Q6J("disabled",n.loading),t.xp6(1),t.hij(" ",n.loading?"Cargando...":"Agregar"," "))},directives:[p.sg,p.O5,u.Fj,u.JJ,u.On,f.w9,u._Y,u.JL,u.F],pipes:[p.H9],styles:[""]}),o})()}];let H=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[Z.Bz.forChild(E)],Z.Bz]}),o})(),I=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,H,u.u5,f.A0]]}),o})()}}]);