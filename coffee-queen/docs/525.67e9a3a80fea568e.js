"use strict";(self.webpackChunkcoffee_queen=self.webpackChunkcoffee_queen||[]).push([[525],{3525:(w,m,i)=>{i.r(m),i.d(m,{UsersControlModule:()=>M});var c=i(1048),_=i(4200),d=i(3388),e=i(257),g=i(230),a=i(9508),p=i(3193);function u(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1,"Admin"),e.qZA())}function C(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1,"Mesero"),e.qZA())}function U(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1,"Jefe de cocina"),e.qZA())}function h(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"h5",31),e._uU(2),e.qZA(),e.qZA(),e.TgZ(3,"div",32),e.TgZ(4,"button",33),e.NdJ("click",function(){return e.CHM(t).$implicit.close("return")}),e._uU(5,"Cancelar"),e.qZA(),e.TgZ(6,"button",34),e.NdJ("click",function(){return e.CHM(t).$implicit.close("return")})("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw().deleteUser(r._id)}),e._uU(7,"Eliminar"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(2),e.hij("\xbfEst\xe1s seguro que deseas eliminar a ",t.nameUser," ?")}}const Z=function(n,l){return{showInput:n,hiddenInput:l}};function f(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"div",14),e.TgZ(2,"label",15),e._uU(3,"Nombre:"),e.qZA(),e.TgZ(4,"input",35),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).nameUserUpdate=r}),e.qZA(),e.qZA(),e.TgZ(5,"div",14),e.TgZ(6,"label",15),e._uU(7,"Correo Electr\xf3nico:"),e.qZA(),e.TgZ(8,"input",36),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).emailUserUpdate=r}),e.qZA(),e.qZA(),e.TgZ(9,"div",14),e.TgZ(10,"button",37),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updatePassword()})("click",function(){return e.CHM(t),e.oxw(2).changeFlag()}),e._uU(11,"Cambiar contrase\xf1a"),e.qZA(),e.TgZ(12,"input",38),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).passwordUserUpdate=r}),e.qZA(),e.qZA(),e.TgZ(13,"label",39),e._uU(14,"Rol:"),e.qZA(),e.TgZ(15,"ng-select",40),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).optionSelectedRole=r}),e.qZA(),e.qZA(),e.TgZ(16,"div",32),e.TgZ(17,"button",33),e.NdJ("click",function(){return e.CHM(t).$implicit.close("return")})("click",function(){return e.CHM(t),e.oxw(2).cancelUpdate()}),e._uU(18,"Cancelar"),e.qZA(),e.TgZ(19,"button",34),e.NdJ("click",function(){return e.CHM(t).$implicit.close("return")})("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw().updateUser(r)}),e._uU(20," Modificar"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.nameUserUpdate),e.xp6(4),e.Q6J("ngModel",t.emailUserUpdate),e.xp6(4),e.Q6J("ngModel",t.passwordUserUpdate)("ngClass",e.WLB(7,Z,t.flag,!t.flag))("disabled",t.enabledInput),e.xp6(3),e.Q6J("items",t.arrayRole)("ngModel",t.optionSelectedRole)}}function b(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.YNc(5,u,2,0,"td",25),e.YNc(6,C,2,0,"td",25),e.YNc(7,U,2,0,"td",25),e.TgZ(8,"td"),e.TgZ(9,"img",26),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(15);return e.oxw().open(r)})("click",function(){const s=e.CHM(t).$implicit;return e.oxw().capturar(s)}),e.qZA(),e.qZA(),e.TgZ(10,"td"),e.TgZ(11,"img",27),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(13);return e.oxw().open(r)}),e.qZA(),e.qZA(),e.YNc(12,h,8,1,"ng-template",28,29,e.W1O),e.YNc(14,f,21,10,"ng-template",28,30,e.W1O),e.qZA()}if(2&n){const t=l.$implicit;e.xp6(2),e.Oqu(t.nameUser),e.xp6(2),e.Oqu(t.email),e.xp6(1),e.Q6J("ngIf",1==t.roles.admin),e.xp6(1),e.Q6J("ngIf",1==t.roles.waiter),e.xp6(1),e.Q6J("ngIf",1==t.roles.cook)}}const T=[{path:"",component:(()=>{class n{constructor(t,o,r){this.userService=t,this.modalService=o,this.formBuilder=r,this.newUser={_id:"",nameUser:"",email:"",password:"",roles:{admin:!1,cook:!1,waiter:!1},image:""},this.arrayRole=[],this.nameUser="",this.emailUser="",this.optionSelected="",this.optionSelectedRole="",this.nameUserUpdate="",this.emailUserUpdate="",this.passwordUserUpdate="",this.passwordUser="",this.htmlStr="",this.enabledInput=!0,this.closeResult="",this.comment="",this.setcomment="",this.flag=!1}ngOnInit(){this.userService.getAllUsers().subscribe(t=>{this.users=t}),this.arrayRole=["Jefe de cocina","Mesero","Administrador"],this.optionSelected="Seleccione Rol"}capturar(t){1==t.roles.admin&&(this.optionSelectedRole="Administrador"),1==t.roles.cook&&(this.optionSelectedRole="Jefe de cocina"),1==t.roles.waiter&&(this.optionSelectedRole="Mesero"),this.nameUserUpdate=t.nameUser,this.emailUserUpdate=t.email}updateUser(t){switch(t.nameUser=this.nameUserUpdate,t.email=this.emailUserUpdate,this.optionSelectedRole){case"Jefe de cocina":t.roles={admin:!1,waiter:!1,cook:!0},t.image="../../assets/cook-avatar.png";break;case"Mesero":t.roles={admin:!1,waiter:!0,cook:!1},t.image="../../assets/mesero-avatar.png";break;case"Administrador":t.roles={admin:!0,waiter:!1,cook:!1},t.image="../../assets/admin-avatar.png"}""!=this.passwordUserUpdate?(t.password=this.passwordUserUpdate,this.userService.putUserApi(t,t._id).subscribe()):(delete t.password,this.userService.putUserApi(t,t._id).subscribe()),this.flag=!1,this.passwordUserUpdate=""}cancelUpdate(){this.flag=!1,this.passwordUserUpdate=""}updatePassword(){this.enabledInput=!1}changeFlag(){this.flag=!this.flag}addUser(){switch(this.newUser={_id:"",nameUser:"",email:"",password:"",roles:{admin:!1,cook:!1,waiter:!1},image:""},this.newUser.nameUser=this.nameUser,this.newUser.email=this.emailUser,this.newUser.password=this.passwordUser,this.optionSelected){case"Jefe de cocina":this.newUser.roles={admin:!1,waiter:!1,cook:!0},this.newUser.image="../../assets/cook-avatar.png";break;case"Mesero":this.newUser.roles={admin:!1,waiter:!0,cook:!1},this.newUser.image="../../assets/mesero-avatar.png";break;case"Administrador":this.newUser.roles={admin:!0,waiter:!1,cook:!1},this.newUser.image="../../assets/admin-avatar.png"}this.userService.postUserApi(this.newUser).subscribe(),this.users.push(this.newUser),this.cleanUserForm()}deleteUser(t){this.userService.deleteUserApi(t).subscribe();const o=this.users.filter(r=>r._id!==t);this.users=o}cleanUserForm(){this.nameUser="",this.emailUser="",this.passwordUser="",this.optionSelected="Seleccione Rol"}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title",windowClass:"custom-class",scrollable:!0}).result.then(o=>{this.closeResult=`Closed with: ${o}`,this.setcomment=this.comment},o=>{this.closeResult=`Dismissed ${this.getDismissReason(o)}`})}getDismissReason(t){return t===d.If.ESC?"by pressing ESC":t===d.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.f),e.Y36(d.FF),e.Y36(a.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-control"]],decls:48,vars:6,consts:[[1,"mb-4","mt-4"],["data-bs-toggle","modal","data-bs-target","#modalFormUser","data-bs-whatever","@getbootstrap",1,"btn","btnAgregar"],[1,"margen","tablePedidos","p-3"],[1,"p-5","table","table-striped"],[1,"colorPedido"],["scope","col"],[4,"ngFor","ngForOf"],["id","modalFormUser","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],["for","recipient-name",1,"col-form-label"],["type","text","id","recipient-name","name","inputName",1,"form-control",3,"ngModel","ngModelChange"],["for","recipient-name",1,"col-form-label","w-50"],["type","text","id","recipient-email","name","inputEmail",1,"form-control","w-50",3,"ngModel","ngModelChange"],["type","text","id","recipient-password","name","inputPassword",1,"form-control","w-50",3,"ngModel","ngModelChange"],[1,"col-label","w-75"],["name","selectRole",1,"mb-3",3,"items","ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-palet",3,"click"],[4,"ngIf"],["src","../../../../assets/editar.png",1,"cursor",3,"click"],["src","../../../../assets/bxs-trash.png",1,"cursor",3,"click"],["class","custom-class"],["content",""],["contentEdit",""],["id","modal-basic-title",1,"modal-title"],[1,"modal-footer","d-flex","justify-content-center"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-palet",3,"click"],["type","text","id","recipient-name","name","inputUserEdit",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","recipient-name","name","inputEmailEdit",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-secondary","my-2",3,"click"],["type","text","id","recipient-name","name","inputPasswordEdit",1,"form-control",3,"ngModel","ngClass","disabled","ngModelChange"],["for","select",1,"col-form-label","w-75"],[3,"items","ngModel","ngModelChange"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e._uU(2,"Agregar Usuario"),e.qZA(),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"table",3),e.TgZ(5,"thead"),e.TgZ(6,"tr",4),e.TgZ(7,"th",5),e._uU(8,"Nombres y Apellidos"),e.qZA(),e.TgZ(9,"th",5),e._uU(10,"Correo"),e.qZA(),e.TgZ(11,"th",5),e._uU(12,"Roles"),e.qZA(),e.TgZ(13,"th",5),e._uU(14,"Acciones"),e.qZA(),e._UZ(15,"th",5),e.qZA(),e.qZA(),e.TgZ(16,"tbody"),e.YNc(17,b,16,5,"tr",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",7),e.TgZ(19,"div",8),e.TgZ(20,"div",9),e.TgZ(21,"div",10),e.TgZ(22,"h5",11),e._uU(23,"Agregar Usuario"),e.qZA(),e._UZ(24,"button",12),e.qZA(),e.TgZ(25,"div",13),e.TgZ(26,"form"),e.TgZ(27,"div",14),e.TgZ(28,"label",15),e._uU(29,"Nombre:"),e.qZA(),e.TgZ(30,"input",16),e.NdJ("ngModelChange",function(s){return o.nameUser=s}),e.qZA(),e.qZA(),e.TgZ(31,"div",14),e.TgZ(32,"label",17),e._uU(33,"Correo Electr\xf3nico:"),e.qZA(),e.TgZ(34,"input",18),e.NdJ("ngModelChange",function(s){return o.emailUser=s}),e.qZA(),e.qZA(),e.TgZ(35,"div",14),e.TgZ(36,"label",17),e._uU(37,"Contrase\xf1a:"),e.qZA(),e.TgZ(38,"input",19),e.NdJ("ngModelChange",function(s){return o.passwordUser=s}),e.qZA(),e.qZA(),e.TgZ(39,"div"),e.TgZ(40,"label",20),e._uU(41,"Rol:"),e.qZA(),e.TgZ(42,"ng-select",21),e.NdJ("ngModelChange",function(s){return o.optionSelected=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"div",22),e.TgZ(44,"button",23),e._uU(45,"Cancelar"),e.qZA(),e.TgZ(46,"button",24),e.NdJ("click",function(){return o.addUser()}),e._uU(47,"Agregar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(17),e.Q6J("ngForOf",o.users),e.xp6(13),e.Q6J("ngModel",o.nameUser),e.xp6(4),e.Q6J("ngModel",o.emailUser),e.xp6(4),e.Q6J("ngModel",o.passwordUser),e.xp6(4),e.Q6J("items",o.arrayRole)("ngModel",o.optionSelected))},directives:[c.sg,c.O5,a.Fj,a.JJ,a.On,c.mk,p.w9,a._Y,a.JL,a.F],styles:[".showInput[_ngcontent-%COMP%]{display:inline-block}.hiddenInput[_ngcontent-%COMP%]{display:none!important}"]}),n})()}];let A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[_.Bz.forChild(T)],_.Bz]}),n})(),M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,A,a.u5,p.A0,a.UX]]}),n})()}}]);